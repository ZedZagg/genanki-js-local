<meta charset="utf8" />
<html>

<!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
  integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
  integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
  integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
  integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<!-- emscripten -->
<script src="js/emscripten/emscriptenfs.js"></script>

<!-- sqlite -->
<script src='js/sql/sql.js'></script>

<!-- anki -->
<script src="js/anki/apkg_col.js"></script>
<script src="js/anki/apkg_schema.js"></script>
<script src="js/anki/deck.js"></script>
<script src="js/anki/model.js"></script>
<script src="js/anki/default.js"></script>
<script src="js/anki/note.js"></script>
<script src="js/anki/package.js"></script>
<script src="js/anki/anki_hash.js"></script>
<script src="js/anki/sha256.js"></script>

<!-- zip .apkg -->
<script src="js/jszip.min.js"></script>

<!-- File saver -->
<script src="js/filesaver/FileSaver.min.js"></script>

<script src='js/index.js'></script>
<script src="js/test.js"></script>

<script src="js/fsimage.js"></script>
<script src="demo.js"></script>
<script src="csv_to_apkg.js"></script>

<link href="css/demo.css" rel="stylesheet">

<body>



  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="https://github.com/infinyte7/genanki-js"> genanki-js</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="changePage('example');">Run Example</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="changePage('csv_apkg');">CSV to APKG</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="turnOnDevTools();">Dev tools</a>
        </li>
      </ul>
    </div>
  </nav>

  <section id="run_example">

    <div style="text-align: center;">
      <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"
        aria-haspopup="true" aria-expanded="false">
        Select test example
      </button>
      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        <a class="dropdown-item" href="#" onclick="changeCode('code1');">Basic and reversed card</a>
        <a class="dropdown-item" href="#" onclick="changeCode('code2');">Two notes</a>
        <a class="dropdown-item" href="#" onclick="changeCode('code3');">Ten notes in loop</a>
        <a class="dropdown-item" href="#" onclick="changeCode('code4');">Two Chinese notes</a>
        <a class="dropdown-item" href="#" onclick="changeCode('code5');">Add image file</a>
      </div>
    </div>
    </div>

    <br>

    <div style="text-align: center;">
      <h3 id="codeTitle">Basic and reversed card</h3>
    </div>

    <br>

    <div style="text-align: center;">
      <textarea id="codeArea" style="margin: 0px; width: 640px; height: 490px;">
var m = new Model({
  name: "Basic (and reversed card)",
  id: "1543634829843",
  flds: [
    { name: "Front" },
    { name: "Back" }
  ],
  req: [
    [ 0, "all", [ 0 ] ],
    [ 1, "all", [ 1 ] ]
  ],
  tmpls: [
    {
      name: "Card 1",
      qfmt: "{{Front}}",
      afmt: "{{FrontSide}}\n\n<hr id=answer>\n\n{{Back}}",
    },
    {
      name: "Card 2",
      qfmt: "{{Back}}",
      afmt: "{{FrontSide}}\n\n<hr id=answer>\n\n{{Front}}",
    }
  ],
})
                        
var d = new Deck(1276438724672, "Test Deck")

d.addNote(m.note(['this is front', 'this is back']))

var p = new Package()
p.addDeck(d)

p.writeToFile('deck.apkg')       
  </textarea>

    </div>

    <br>

    <div style="text-align: center;">
      <button type="button" class="btn btn-success" onclick="runCode();">Run</button>
    </div>

  </section>

  <section id="csv_to_apkg" style="display: none;">
    <div class="card" style="margin: 10px;">
      <div class="card-body" style="text-align: justify">
        <div>
          <h4>Generate decks from csv and tsv files</h4>
        </div>
        <div>
          1. Import csv or tsv file
        </div>
        <div>
          2. Enter fields name, and select fields to be added to front back or both
        </div>
        <div>
          3. Export deck
        </div>
        <div>
          <b>Note:</b> If downloaded file name ends with <i>.zip</i> then remove it and make extension of file
          <i>.apkg</i>
          <div>
            For e.g. <i>Export-Deck.apkg.zip</i> ---> <i>Export-Deck.apkg</i>
          </div>
        </div>
        <div>
          <b>4. Dev tools can be used to check if there any error in exporting decks.</b>
        </div>
      </div>
    </div>


    <div class="card" style="margin: 10px;">
      <div class="card-body">
        <h4>Select a CSV/TSV file</h4>
        <div class="form-group">
          <input type="file" class="form-control-file" onchange="inputFile();" id="file">
        </div>

        <div style="padding-top: 10px; padding-bottom: 10px;">
          <h5 style="display: inline;">Fields Separated By
            <select id="fieldSeparatedBy" class="select-new">
              <option value="tab">TAB</option>
              <option value="comma">COMMA</option>
            </select>
          </h5>
        </div>

        <div type="button" class="btn btn-primary" onclick="importFile()">Import</div>
      </div>

      <div id="firstEntry"></div>
    </div>


    <div id="fields-card" style="display: none;">
      <div class="card" style="margin: 10px;">

        <div class="card-body">

          <div>
            <label for='deckName'><h4>Enter Deck Name</h4></label>
            <input id='deckName' type='text'></input>
          </div>

          <br>

          <div id="fields-msg"></div>
          <div id="fields"></div>

          <div type="button" class="btn btn-success" onclick="exportDeck()">Export
          </div>

          <div id="exportMsg"></div>

        </div>
      </div>
    </div>
  </section>

  <div id="snackbar"></div>
</body>

</html>